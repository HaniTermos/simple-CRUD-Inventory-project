<%- include('../partials/header') %>
<main class="container">
    <div>
        <h1><%= category.name %></h1>
        <a href="/categories"><button>Categories</button></a>
        <a href="/categories/<%= category.id %>/edit"><button>Edit</button></a>
        <form action="/categories/<%= category.id %>" method="POST">
            <input type="hidden" name="_method" value="DELETE">
            <button type="submit" onclick="return confirm('Are you sure you want to delete this category?');">Delete</button>
        </form>
    </div>
    <section>
        <div class="page-head">
            <h2>Items in <%= category.name %></h2>
            <div class="toolbar">
                <input class="input" type="search" placeholder="Search items" data-search data-target=".list > li" data-text="a" />
                <a class="btn primary" href="/items/new?category_id=<%= category.id %>">Create New Item</a>
            </div>
        </div>
        <ul class="list">
            <% items.forEach(item => { %>
                <li>
                    <a href="/items/<%= item.id %>"><%= item.name %></a>
                    <div class="meta">
                        <span class="muted">Qty: <%= item.quantity || 0 %></span>
                        <span class="muted">$<%= item.price || 0.00 %></span>
                        <span class="muted"><%= item.description || 'N/A' %></span>
                    </div>
                    <div class="actions">
                        <a class="btn" href="/items/<%= item.id %>">View</a>
                        <a class="btn" href="/items/<%= item.id %>/edit">Edit</a>
                        <form action="/items/<%= item.id %>" method="POST" data-confirm="Delete this item? This cannot be undone.">
                            <input type="hidden" name="_method" value="DELETE">
                            <button class="btn danger" type="submit">Delete</button>
                        </form>
                    </div>
                </li>
            <% }) %>
        </ul>
    </section>
</main>
<%- include('../partials/footer') %>